# Стандарты оформления кода PHP (back-end)

## Содержание

- [1. Общие правила](#link1)
- [2. Именование.](#link2)
  - [2.1. Выбор имени.](#link21)
  - [2.2. Имена классов.](#link22)
  - [2.3. Имена функций/методов.](#link23)
  - [2.4. Имена переменных/аргументов в методах.](#link24)
  - [2.5. Имена элементов в массивах.](#link25)
  - [2.6. Глобальные переменные.](#link26)
  - [2.7. Константы.](#link27)
- [3. Форматирование.](#link3)
  - [3.1. Отступы.](#link31)
  - [3.2. Пробелы.](#link32)
  - [3.3. Пустая строка.](#link33)
  - [3.4. Круглые скобки.](#link34)
  - [3.5. Фигурные скобки.](#link35)
  - [3.6. Аргументы.](#link36)
  - [3.7. Конструкция switch/case.](#link37)
  - [3.8. Конструкция try/catch.](#link38)
  - [3.9. Конструкция if/elseif/else.](#link39)
  - [3.10. Комментарии.](#link310)

## 1. Общие правила<a name="link1"></a>

- Имена должны быть понятными и читабельными. Не использовать латинской транскрипции.
- Контроль длинны кода.
    - Строка, рекомендуется, не более 120 символов.
    - Функция не более 20 строк.
    - Метод не более 50 строк.
    - Класс не более 300 строк.
    - Файл не более 1000 строк.
- Вставлять пустую строку между логическими блоками.
- Комментировать и документировать код.
- Постоянный рефакторинг.
- Использовать систему контроля версий.

## 2. Именование.<a name="link2"></a>

### 2.1. Выбор имени.<a name="link21"></a>

- Имена должны быть понятными и читабельными.
- Должны дать четкое представление, что содержит переменная или что делает функция/метод/класс.
- Не использовать латинской транскрипции.

### 2.2. Имена классов.<a name="link22"></a>

- Имя классу нужно давать, после того как четко понятно, что этот класс будет делать.
- Первая буква имени всегда заглавная. Использовать стиль написания имени `PascalCase`.
- Рекомендуется использовать в имени не более трех слов.
- Используйте суффиксы, если это поможет увеличить смысловую нагрузку. Например: `AuthController, UserModel`.
- Не импользовать производные имена от имени наследуемого класса.
- Не использовать в имени нижнего подчеркивания `_`.

### 2.3. Имена функций/методов.<a name="link23"></a>

Следовать рекомендациям по именованию класссов, с одним исключением, использовать стиль написания имени `camelCase`.

### 2.4. Имена переменных/аргументов в методах.<a name="link24"></a>

- Первая буква имени всегда строчная.
- Использовать стиль написания имени `camelCase`.
- Имя должно дать четкое предстовление, что содержит переменная или что передается через аргумент.

### 2.5. Имена элементов в массивах.<a name="link25"></a>

- Использовать стиль написания имени `snake_case`.
- Не использовать дефис `-`.

### 2.6. Глобальные переменные.<a name="link26"></a>

В глобальных переменных импользуйте префикс `g`. Пример именования: `global $gName;`.

### 2.7. Константы.<a name="link27"></a>

Имена должны написаны заглавными буквами и использовать стиль написания имени `snake_case`.

## 3. Форматирование.<a name="link3"></a>

### 3.1. Отступы.<a name="link31"></a>

Всегда использовать отступы для более простого визуального восприятия. Отступ должен содержать четыре пробела.

Пример:

```injectablephp
<?php
switch ($i) {
    case 0:
        echo "i равно 0";
        break;
    case 1:
        echo "i равно 1";
        break;
    default:
        echo "i равно 2";
        break;
}
?>
```

### 3.2. Пробелы.<a name="link32"></a>

#### Ставятся:

- между `for`/`foreach`/`while`/`catch` и `(`
- между `)` и `{`
- перед и после `=>`
- между `try` и `{`
- между `}` и `catch`

#### Не ставятся:

- После имени метода.
- В списке аргументов после запятых.
- Между `(` и именем функции/метода.

### 3.3. Пустая строка.<a name="link33"></a>

- После определения пространства имен.
- После блока импорта. Каждая строка блока должна начинаться с `use`.
- После каждого логического блока.

Пример:

```injectablephp
<?php
    namespace Vendor\Package;

    use FirstClass;
    use SecondClass as Second;

    //...
?>
```

### 3.4. Круглые скобки.<a name="link34"></a>

- Не выносим на отдельные строки.
- Не ставим пробелы внутри: после `(` и перед `)`.
- Ставим пробелы до скобок и после.
- Внутри перечисление отделяем пробелами.

### 3.5. Фигурные скобки.<a name="link35"></a>

- Открывающая скобка `{` выносится на новую строку перед телом метода, для классов.
- Открывающая скобка `{` не выносится на отдельную строку в конструкциях и замыканиях.
- Закрывающая скобка `}` в конструкциях, имени метода, определении метода, классах пишется с новой строки и отделяется
  одним отступом.

### 3.6. Аргументы.<a name="link36"></a>

- Оформляется в одну строку через запятую либо в столбик.
- Аргументы на одной строке пишутся через запятую внутри круглых скобок.
- Пробел ставится только после запятой.

Пример оформления в строку:

```injectablephp
<?php
    FooClass::fooMethod($arg1, $arg2, $arg3);
?>
```

Пример оформления в столбик:

```injectablephp
<?php
    $foo->fooMethod(
        $arg1,
        $arg2,
        $arg3
    );
?>
```

### 3.7. Конструкция switch/case.<a name="link37"></a>

Конструкцию делим на три уровня: `switch`, `case`, `echo`/`break`. Каждый уровень сдвигаются на один отступ. Если в
конструкции не используется `break`, указывается коментарий `// no break`.

Пример:

```injectablephp
<?php
    switch ($i) {
        case 0:
            echo 'First case, with a break';
            break;
        case 1:
            echo 'Second case, with fall through';
            // no break
        case 2:
        case 3:
        case 4:
            echo 'Third case, return instead of break';
            return;
        default:
            echo 'Default case';
            break;
    }
?>
```

### 3.8. Конструкция try/catch.<a name="link38"></a>

- Тело `try` и тело `catch` отделяются одним отступом.
- Пробелы нужно поставить:
    - между `try` и `{`
    - между `}` и `catch`
    - между `catch` и `(`
    - между `)` и `{`
- `catch` и скобку `}` ставим на одну строку.

Пример:

```injectablephp
<?php
   try {
        // тело try
        } catch (FirstExceptionType $i) {
        // тело catch
    } catch (OtherExceptionType $i) {
        // тело catch
    }
?>
```

### 3.9. Конструкция if/elseif/else.<a name="link39"></a>

- Операторы и открывающую фигурную скобку пишем на одной строке.
- Закрывающую фигурную скобку оператора пишем на той же строке, что и оператор.
- Заключительную фигурную скобку пишем на отдельной строке.
- Оператор `else if` пишем как единое слово - `elseif`.
- Тело оператора отделяем отступом.

### 3.10. Комментарии.<a name="link310"></a>

- Комментарии указываются только в том случае, если логика выполнения кода не очевидна. 
- Если сли в коде много комментарий, стоит подумать о рефакторинге кода.
- Временное комментирование больших блоков не используемого кода запрещенно. Если код не используется,
  следует его удалить.
